From 21e4c6abc8ce00a048ec58668fdb992c1853f1ea Mon Sep 17 00:00:00 2001
From: Patil, Rachna <rachna@ti.com>
Date: Wed, 28 Sep 2011 16:31:50 +0530
Subject: [PATCH 02/20] AM335X: Avoid i2c pin mux setup.

Since i2c1 is available only in some profiles, we bypass i2c pin
muxing in i2c.c file. Pin muxing is taken care of, in the board file
instead.

Signed-off-by: Patil, Rachna <rachna@ti.com>
---
 arch/arm/plat-omap/i2c.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/arch/arm/plat-omap/i2c.c b/arch/arm/plat-omap/i2c.c
index 3341ca4..3b8a4ed 100644
--- a/arch/arm/plat-omap/i2c.c
+++ b/arch/arm/plat-omap/i2c.c
@@ -139,7 +139,8 @@ static inline int omap2_i2c_add_bus(int bus_id)
 	char oh_name[MAX_OMAP_I2C_HWMOD_NAME_LEN];
 	struct omap_i2c_bus_platform_data *pdata;
 
-	omap2_i2c_mux_pins(bus_id);
+	if (!cpu_is_am335x())
+		omap2_i2c_mux_pins(bus_id);
 
 	l = snprintf(oh_name, MAX_OMAP_I2C_HWMOD_NAME_LEN, "i2c%d", bus_id);
 	WARN(l >= MAX_OMAP_I2C_HWMOD_NAME_LEN,
-- 
1.6.6.1

